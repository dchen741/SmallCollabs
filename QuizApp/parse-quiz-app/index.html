  <!doctype html>
  <head>
  	<meta charset="utf-8">

  	<title>Quiz</title>
  	<meta name="description" content="My Parse App">
  	<meta name="viewport" content="width=device-width">
  	<link rel="stylesheet" href="css/reset.css">
  	<link rel="stylesheet" href="css/styles.css">
  	<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
  	<script type="text/javascript" src="http://www.parsecdn.com/js/parse-1.2.18.min.js"></script>
  </head>

  <body>

  	<div id="main">
  		<h1>Surgeon Quiz</h1>
  		<div class="questions">
  			<p>Enter your name:</p>
  			<form id="form" onsubmit="return false;">
  				<input type="text" id="userInput" />
  			</form> 
  		</div>
  		<div class="questions">
  			<p>Hello, this quiz has 350 questions, directions below, blah blah blah<p>		
  			</div>


  			<div class="questions">
  				<p><b id='questionText'>test</b></p>
  				<form class="options">
  					<input class="option" type="text" name="question" id="answerInput"><br>
  				</form>
  			</div>
  			
  			<br>
  			<input type="button" id='next' value="Next" onlick="sum_values()">

  			<script type="text/javascript">
  				Parse.initialize("ASMRRN5iWBqYCX4xmWqE4WVfFexRuVhDuEudAOgh", "ilpKJp7jgCw4L9XBQ6DEUaYVXOxy4iu8QPqEZZ7g");

  				$(document).ready(function(){
  					answers = new Object();
  					$('.option').change(function(){
  						var answer = ($(this).attr('value'))
  						var question = ($(this).attr('name'))
  						answers[question] = answer
  					})

      //var item1 = document.getElementById('questions');

      var totalQuestions = $('.questions').size();
      var currentQuestion = 0;
      var questionNumber = 2;
      $questions = $('.questions');
      $questions.hide();
      $($questions.get(currentQuestion)).fadeIn();
      $('#next').click(function(){
      	$($questions.get(currentQuestion)).fadeOut(function(){
      		if (currentQuestion<2){
      			currentQuestion = currentQuestion + 1;
      		}
      		if (currentQuestion == 1){
      			var NameOfPerson = Parse.Object.extend("nameOfPerson");
      			var nameOfPerson = new NameOfPerson();
      			var input = document.getElementById("userInput").value;
      			nameOfPerson.save({name: input});
      		}
      		if (currentQuestion>1){
      			var questionArray = ["The [thoracic] and [sacral] portions of the vertebral column are considered [kyphotic] curves.", "The [cervical] and [lumbar] portions of the vertebral column are considered [lordotic] curves.", "The most lateral projection of the [scapula] is the [acromion].", "The [coracoid] is the most anterior projection of the [scapula]."];
      			var userInput = questionArray[questionNumber-2];
      			
      			var numChoices = 0;
      			for (var i = 0, len = userInput.length; i < len; i++) {
      				if (userInput[i] == "["){
      					numChoices++;
      				}
      			}
				//alert(numChoices);
				//CODE HERE
				var lBracketCount = 0;
				var rBracketCount = 0;
				var lBracketIndex = 0;
				var rBracketIndex = 0;

				var pickQuestion = Math.floor((Math.random() * numChoices) + 1);
				//alert("question number " + pickQuestion);

				for (var i = 0, len = userInput.length; i < len; i++) {
					if (userInput[i] == "["){
						lBracketCount++;
						if (lBracketCount == pickQuestion){
							lBracketIndex = i;
							//alert("left bracket " + lBracketIndex);
						}
					}
					
					if (userInput[i] == "]"){
						rBracketCount++;
						if (rBracketCount == pickQuestion){
							rBracketIndex = i;
							//alert("right bracket " + rBracketIndex);
						}
					}
				}

				var answerText = userInput.slice(lBracketIndex+1,rBracketIndex);
				alert("answer is " + answerText);
				userInput = userInput.slice(0,lBracketIndex) + " _________ " + userInput.slice(rBracketIndex+1,userInput.length);
				document.getElementById('questionText').innerHTML = userInput;

				var answer = document.getElementById("answerInput").value;

				questionNumber++;
			}
			if(currentQuestion == totalQuestions){
				var result = sum_values()
               //do stuff with the result
               //alert(result);
           }else{
           	$($questions.get(currentQuestion)).fadeIn();
           }
       });
});
});


  function sum_values(){
  	var the_sum = 0;
  	for (questions in answers){
  		the_sum = the_sum + parseInt(answers[question])
  	}
  	return the_sum
  }
</script>


<script type="text/javascript">
    //Parse.initialize("ASMRRN5iWBqYCX4xmWqE4WVfFexRuVhDuEudAOgh", "ilpKJp7jgCw4L9XBQ6DEUaYVXOxy4iu8QPqEZZ7g");

    //var TestObject = Parse.Object.extend("TestObject");
    //var testObject = new TestObject();
    //testObject.save({foo: "bar"}).then(function(object) {
      //alert("yay! it worked");
    //});

    //var TestObject = Parse.Object.extend("TestObject");
    //var testObject = new TestObject();
    //testObject.save({foo: "bar"}, {
      //success: function(object) {
        //$(".success").show();
      //},
      //error: function(model, error) {
       // $(".error").show();
     // }
    //});
</script>
</body>

</html>

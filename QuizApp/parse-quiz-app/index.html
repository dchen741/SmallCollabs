  <!doctype html>
  <head>
  	<meta charset="utf-8">

  	<title>Quiz</title>
  	<meta name="description" content="My Parse App">
  	<meta name="viewport" content="width=device-width">
  	<link rel="stylesheet" href="css/reset.css">
  	<link rel="stylesheet" href="css/styles.css">
  	<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
  	<script type="text/javascript" src="http://www.parsecdn.com/js/parse-1.2.18.min.js"></script>
  </head>

  <body>

  	<div id="main">
  		<h1>Surgeon Quiz</h1>
  		<div class="questions">
  			<p>Enter your name:</p>
  			<form id="form" onsubmit="return false;">
  				<input type="text" id="nameInput" />
  			</form> 
  		</div>
  		<div class="questions">
  			<p>Hello, this quiz has 350 questions, directions below, blah blah blah<p>		
  			</div>


  			<div class="questions">
  				<p><b id='questionText'>test</b></p>
  				<form class="options">
  					<input class="option" type="text" name="question" id="answerInput"><br>
  				</form>
  			</div>
  			
  			<br>
  			<input type="button" id='next' value="Next" onclick="nextQuestionClick()">

  			<script type="text/javascript">
  				Parse.initialize("ASMRRN5iWBqYCX4xmWqE4WVfFexRuVhDuEudAOgh", "ilpKJp7jgCw4L9XBQ6DEUaYVXOxy4iu8QPqEZZ7g");

      			var QuizInfo = Parse.Object.extend("QuizInfo");
      			var quizInfo = new QuizInfo();

  				var questionNumber;
  				var currentQuestion;
  				var questionArray;
  				var userInput;
  				var answerText;
  				var answer;

  				$(document).ready(function(){
  					answers = new Object();
  					$('.option').change(function(){
  						var answer = ($(this).attr('value'))
  						var question = ($(this).attr('name'))
  						answers[question] = answer
  					})

      var totalQuestions = $('.questions').size();
      currentQuestion = 0;
      questionNumber = 2;
      $questions = $('.questions');
      $questions.hide();
      $($questions.get(currentQuestion)).fadeIn();
      $('#next').click(function(){
      	$($questions.get(currentQuestion)).fadeOut(function(){
      		if (currentQuestion<2){
      			currentQuestion = currentQuestion + 1;
      		}
      		if (currentQuestion == 1){
				var input = document.getElementById("nameInput").value;
      			quizInfo.save({"name": input});
      		}
      		if (currentQuestion>1){
      			questionArray = ["The [thoracic] and [sacral] portions of the vertebral column are considered [kyphotic] curves.", "The [cervical] and [lumbar] portions of the vertebral column are considered [lordotic] curves.", "The most lateral projection of the [scapula] is the [acromion].", "The [coracoid] is the most anterior projection of the [scapula]."];
      			userInput = questionArray[questionNumber-2];
      			
      			var numChoices = 0;
      			for (var i = 0, len = userInput.length; i < len; i++) {
      				if (userInput[i] == "["){
      					numChoices++;
      				}
      			}
				//alert(numChoices);
				//CODE HERE
				var lBracketCount = 0;
				var rBracketCount = 0;
				var lBracketIndex = 0;
				var rBracketIndex = 0;

				var pickQuestion = Math.floor((Math.random() * numChoices) + 1);
				//alert("question number " + pickQuestion);

				for (var i = 0, len = userInput.length; i < len; i++) {
					if (userInput[i] == "["){
						lBracketCount++;
						if (lBracketCount == pickQuestion){
							lBracketIndex = i;
							//alert("left bracket " + lBracketIndex);
						}
					}
					
					if (userInput[i] == "]"){
						rBracketCount++;
						if (rBracketCount == pickQuestion){
							rBracketIndex = i;
							//alert("right bracket " + rBracketIndex);
						}
					}
				}

				answerText = userInput.slice(lBracketIndex+1,rBracketIndex);
				//alert("answer is " + answerText);
				userInput = userInput.slice(0,lBracketIndex) + " ___________ " + userInput.slice(rBracketIndex+1,userInput.length);
				document.getElementById('questionText').innerHTML = userInput;

				answer = document.getElementById("answerInput").value;

				questionNumber++;
			}
			if(currentQuestion == totalQuestions){
				var result = sum_values()
               //do stuff with the result
               //alert(result);
           }else{
           	$($questions.get(currentQuestion)).fadeIn();
           }
       });
});
});

  function nextQuestionClick(){
  	//document.getElementsById("answerInput").value == "";
  	if (currentQuestion>1){
  		var correctAnswer;

  		var answer = document.getElementById("answerInput").value;
  		if (answer == answerText){
  			alert("you're right!!");
  			correctAnswer = true;
  		}
  		else {
  			alert ("you're wrong!!");
  			correctAnswer = false;
  		};
		var problemNumberSave = questionNumber-2;
  		problemNumberSave = "p" + problemNumberSave;
  		var obj = {};
  		obj[problemNumberSave] = correctAnswer;
  		quizInfo.save(obj);
  	}
  	document.getElementById("answerInput").value = "";
  }
</script>


<script type="text/javascript">
    //Parse.initialize("ASMRRN5iWBqYCX4xmWqE4WVfFexRuVhDuEudAOgh", "ilpKJp7jgCw4L9XBQ6DEUaYVXOxy4iu8QPqEZZ7g");

    //var TestObject = Parse.Object.extend("TestObject");
    //var testObject = new TestObject();
    //testObject.save({foo: "bar"}).then(function(object) {
      //alert("yay! it worked");
    //});

    //var TestObject = Parse.Object.extend("TestObject");
    //var testObject = new TestObject();
    //testObject.save({foo: "bar"}, {
      //success: function(object) {
        //$(".success").show();
      //},
      //error: function(model, error) {
       // $(".error").show();
     // }
    //});
</script>
</body>

</html>
